{% extends 'base.html' %}
{% block title %} {{ title_name }} {% endblock %}
{% block content %}
<link rel="stylesheet" href="/static/verification/metrologs_control/css/update.css">

<div class="update-page container px-3">
  <h1 class="text-center mb-5">{{ title_name }}</h1>

  <div class="back-btn-wrapper text-center my-3">
    <a href="/verification/?company_id={{ company_id }}" class="btn btn-home fw-bold">
      üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é
    </a>
  </div>

  <div class="update-form-wrapper">
    <h2 class="form-title mb-4 text-center">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –ø–æ–≤–µ—Ä–∫–∏</h2>

    <form id="update-entry-form" method="post">
      <div class="row g-3 rounded-section">
        <div class="col-md-6">
          <h4 class="text-center mb-3">–î–æ –ø–æ–≤–µ—Ä–∫–∏</h4>
          <div class="rounded-section">
            <label class="form-label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–æ–¥—ã, ‚ÑÉ</label>
            <input type="number" name="before_water_temperature" class="form-control mb-2"
              value="{{ metrolog_info.before_water_temperature or '' }}" step="0.00001">

            <label class="form-label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã, ‚ÑÉ</label>
            <input type="number" name="before_air_temperature" class="form-control mb-2"
              value="{{ metrolog_info.before_air_temperature or '' }}" step="0.00001">

            <label class="form-label">–í–ª–∞–∂–Ω–æ—Å—Ç—å –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã, %</label>
            <input type="number" name="before_humdity" class="form-control mb-2"
              value="{{ metrolog_info.before_humdity or '' }}" step="0.00001">

            <label class="form-label">–ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ, –∫–ü–∞</label>
            <input type="number" name="before_pressure" class="form-control"
              value="{{ metrolog_info.before_pressure or '' }}" step="0.00001">
          </div>
        </div>

        <div class="col-md-6">
          <h4 class="text-center mb-3">–ü–æ—Å–ª–µ –ø–æ–≤–µ—Ä–∫–∏</h4>
          <div class="rounded-section">
            <label class="form-label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–æ–¥—ã, ‚ÑÉ</label>
            <input type="number" name="after_water_temperature" class="form-control mb-2"
              value="{{ metrolog_info.after_water_temperature or '' }}" step="0.00001">

            <label class="form-label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã, ‚ÑÉ</label>
            <input type="number" name="after_air_temperature" class="form-control mb-2"
              value="{{ metrolog_info.after_air_temperature or '' }}" step="0.00001">

            <label class="form-label">–í–ª–∞–∂–Ω–æ—Å—Ç—å –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã, %</label>
            <input type="number" name="after_humdity" class="form-control mb-2"
              value="{{ metrolog_info.after_humdity or '' }}" step="0.00001">

            <label class="form-label">–ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ, –∫–ü–∞</label>
            <input type="number" name="after_pressure" class="form-control"
              value="{{ metrolog_info.after_pressure or '' }}" step="0.00001">
          </div>
        </div>
      </div>

      <div class="rounded-section text-center">
        <label class="form-label me-2">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–æ—Å—á–∏—Ç—ã–≤–∞—Ç–µ–ª—å</label>
        <select id="use_opt" name="use_opt" class="form-select w-auto mx-auto" onchange="toggleFields()">
          <option value="True" {% if metrolog_info.use_opt %}selected{% endif %}>–î–∞</option>
          <option value="False" {% if not metrolog_info.use_opt %}selected{% endif %}>–ù–µ—Ç</option>
        </select>
      </div>

      {% include 'metrologs_control/q_sections.html' %}

      <div class="rounded-section text-center">
        <label class="form-label mb-3">–ù–∞–∏–±–æ–ª—å—à–∏–π —Ä–∞—Å—Ö–æ–¥ –≤–æ–¥—ã –≤ —Ç—Ä—É–±–æ–ø—Ä–æ–≤–æ–¥–µ Q–Ω–∞–∏–±., –º¬≥/—á</label>
        <input type="number" name="qh" class="form-control text-center mx-auto" value="{{ metrolog_info.qh or '' }}"
          step="0.00001" min="0.6" max="1.5" style="max-width: 400px;">
      </div>

      <div class="valid-conclusion" style="display: none;">
        <h3>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ: —Å—á–µ—Ç—á–∏–∫ –≤–æ–¥—ã –≥–æ–¥–µ–Ω –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –æ–ø–∏—Å–∞–Ω–∏—é —Ç–∏–ø–∞</h3>
      </div>

      <div class="invalid-conclusion" style="display: none;">
        <h3 id="invalid-conclusion-text"></h3>
      </div>

      <div class="third-invalid-conclusion" style="display: none;">
        <h3>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ: —Å—Ä–µ–¥—Å—Ç–≤–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π –ø—Ä–∏–∑–Ω–∞–Ω–æ –Ω–µ–ø—Ä–∏–≥–æ–¥–Ω—ã–º, –ø–æ –ø—Ä–∏—á–∏–Ω–µ: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –ø—Ä–µ–≤—ã—à–∞–µ—Ç
          –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø.2.7.3</h3>
      </div>

      <input type="hidden" name="high_error_rate" value="false">

      <div class="form-actions">
        <button type="submit" class="btn btn-save">‚úíÔ∏è –ü–æ–¥–ø–∏—Å–∞—Ç—å</button>
      </div>
    </form>
  </div>
</div>

<script>
  window.companyId = {{ company_id | default (None) | tojson | safe }};
  window.reasonType = {{ reason.type | default (None) | tojson | safe }};
  window.reasonFullName = {{ reason.full_name | default (None) | tojson | safe }};
  window.verificationEntryId = {{ verification_entry_id | default (None) | tojson | safe }};
  window.metrologInfoId = {{ metrolog_info.id | default (None) | tojson | safe }};
</script>

<script src="/static/verification/metrologs_control/js/update.js"></script>
{% endblock %}