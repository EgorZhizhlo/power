{% extends 'base.html' %}

{% set is_create = (view_type == 'create') %}
{% block title %}
  {{ last_name|capitalize }} {{ name|capitalize }} {{ patronymic|capitalize }} |
  {% if is_create %}–î–æ–±–∞–≤–ª–µ–Ω–∏–µ{% else %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ{% endif %} –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞
{% endblock %}

{% block content %}
  <link rel="stylesheet" href="/static/company/calendar_reports/css/update_or_create.css">

  <h1 class="fs-xl d-flex flex-column align-items-center mb-4">
    {% if company_image %}
      <div class="photo mb-3">
        <img src="data:image/jpeg;base64,{{ company_image }}"
             alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏: {{ company_name }}">
      </div>
    {% endif %}

    <div class="btn-group mb-3">
      <a href="/companies/calendar-reports?company_id={{company_id}}"
         class="btn btn-outline-secondary label-text fw-bold"
        style="border-width: 3px;">üîô –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</a>
      <a href="/companies/company?company_id={{company_id}}"
         class="btn btn-outline-dark label-text fw-bold"
        style="border-width: 3px;">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>

    {% if is_create %}–î–æ–±–∞–≤–ª–µ–Ω–∏–µ{% else %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ{% endif %} –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞
  </h1>

  <div class="card p-4 mb-5">
    <form id="calendar-report-form">

      <div class="mb-4">
        <label for="name" class="form-label fw-bold label-text">–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞</label>
        <input type="text" id="name" name="name"
               class="form-control text-center input-text"
               value=""
               required maxlength="100">
      </div>

      <h3 class="fw-bold label-text mb-3">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
      
      <div class="row mb-4">
        <div class="col-md-6">
          <label for="for_auditor" class="form-label label-text">–î–æ—Å—Ç—É–ø–µ–Ω —Ä–µ–≤–∏–∑–æ—Ä—É</label>
          <select id="for_auditor" class="form-select input-text">
            <option value="false" selected>–ù–µ—Ç</option>
            <option value="true">–î–∞</option>
          </select>
        </div>
        <div class="col-md-6">
          <label for="for_dispatcher1" class="form-label label-text">–î–æ—Å—Ç—É–ø–µ–Ω –¥–∏—Å–ø–µ—Ç—á–µ—Ä—É 1</label>
          <select id="for_dispatcher1" class="form-select input-text">
            <option value="false" selected>–ù–µ—Ç</option>
            <option value="true">–î–∞</option>
          </select>
        </div>
      </div>

      <div class="row mb-4">
        <div class="col-md-6">
          <label for="for_dispatcher2" class="form-label label-text">–î–æ—Å—Ç—É–ø–µ–Ω –¥–∏—Å–ø–µ—Ç—á–µ—Ä—É 2</label>
          <select id="for_dispatcher2" class="form-select input-text">
            <option value="false" selected>–ù–µ—Ç</option>
            <option value="true">–î–∞</option>
          </select>
        </div>
        <div class="col-md-6">
          <label for="no_date" class="form-label label-text">–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∑–∞—è–≤–∫–∏ –±–µ–∑ –¥–∞—Ç—ã</label>
          <select id="no_date" class="form-select input-text">
            <option value="false" selected>–ù–µ—Ç</option>
            <option value="true">–î–∞</option>
          </select>
        </div>
      </div>

      <h3 class="fw-bold label-text mb-3">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–µ–π –æ—Ç—á—ë—Ç–∞</h3>
      <p class="label-text text-muted mb-3">
        –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ –ø–æ–ª—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞. –í—ã–±–µ—Ä–∏—Ç–µ "–î–∞" –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª—è –≤ –æ—Ç—á—ë—Ç.
      </p>

      <div id="fields-list" class="list-group mb-4">
      </div>

      <div class="d-flex justify-content-end">
        <button type="submit" class="btn btn-outline-success fw-bold label-text" style="border-width: 3px;">
          ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
        </button>
      </div>
    </form>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <script>
    window.companyId = {{ company_id }};
    window.isCreate = {{ 'true' if is_create else 'false' }};
    {% if not is_create %}
    window.calendarReportId = {{ calendar_report_id }};
    {% endif %}
  </script>
  <script src="/static/company/calendar_reports/js/update_or_create.js"></script>
{% endblock %}
