{% extends 'base.html' %}

{% block title %}{{ title_name }}{% endblock %}

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css"
/>

<link rel="stylesheet" href="/static/calendar/orders_planning/css/orders_planning_css.css">

<div class="container-fluid position-relative">
  <h1 class="text-center">{{ title_name }}</h1>
  <div
    class="row fs-5 py-3 px-2 mx-auto"
    style="
      width: 60%;
      border: 2px solid #858181;
      background: #dddcdcbb;
      border-radius: 20px;
    "
  >
    <div class="col-12 col-md-6 d-flex mb-2 mb-md-0">
      <a
        href="/calendar?company_id={{company_id}}"
        class="btn btn-outline-dark flex-grow-1 fw-bold" style="border-width: 3px;"
      >
        üîô –ö –∫–∞–ª–µ–Ω–¥–∞—Ä—é
      </a>
    </div>
    <div class="col-12 col-md-6 d-flex">
      <button
        id="open-filter"
        class="btn btn-outline-primary flex-grow-1 fw-bold" style="border-width: 3px;"
        data-bs-toggle="modal"
        data-bs-target="#filterModal"
      >
       üìÖ –í—ã–±—Ä–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –∏ –¥–∞—Ç—É
      </button>
    </div>
  </div>

  <div id="routes-container" class="routes-grid"></div>

  <div id="loading" class="spinner-overlay" style="display: none;">
    <div class="spinner-border"></div>
  </div>
</div>

<!-- –§–∏–ª—å—Ç—Ä-–º–æ–¥–∞–ª–∫–∞ -->
<div class="modal fade" id="filterModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <form id="modal-filter-form" novalidate>
        <div class="modal-header">
          <h5 class="modal-title">–§–∏–ª—å—Ç—Ä –∑–∞—è–≤–æ–∫</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="modal-routes" class="form-label">–ú–∞—Ä—à—Ä—É—Ç—ã (1‚Äì3)</label>
            <select
              id="modal-routes"
              name="routes"
              class="form-select"
              multiple
            ></select>
          </div>
          <div class="mb-3">
            <label for="modal-date" class="form-label">–î–∞—Ç–∞</label>
            <input
              type="date"
              id="modal-date"
              name="target_date"
              class="form-control"
              required
            >
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-outline-primary fw-bold" style="border-width: 3px;">üìñ –ü–æ–∫–∞–∑–∞—Ç—å</button>
          <button type="button" class="btn btn-outline-secondary fw-bold" style="border-width: 3px;" data-bs-dismiss="modal">‚úñÔ∏è –û—Ç–º–µ–Ω–∞</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  window.currentCompanyId = {{ company_id }};
</script>

<!-- –°–∫—Ä–∏–ø—Ç—ã -->
<script type="module" src="/static/calendar/orders_planning/js/orders_planning_script.js"></script>

<!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

{% endblock %}
