{% extends 'base.html' %}

{% block title %}{{ title_name }}{% endblock %}

{% block content %}
<link rel="stylesheet" href="/static/verification/orders_control/css/view.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

<div class="container-fluid verification-page px-3">
  <h1 class="text-center mb-5">{{ title_name }}</h1>

  <!-- Statistics blocks -->
  <div class="container-statistic">
    <div class="row justify-content-center gap-3">
      <div class="col-12 col-md-5 stats-box">
        <span id="total-count">–í—Å–µ–≥–æ –∑–∞—è–≤–æ–∫: 0</span>
      </div>
      <div class="col-12 col-md-5 stats-box">
        <span id="current-page">–°—Ç—Ä–∞–Ω–∏—Ü–∞: 1</span>
      </div>
    </div>
  </div>

  <!-- Filter form -->
  <div class="container-filter">
    <h2 class="text-start mb-4">–§–∏–ª—å—Ç—Ä –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö –∑–∞—è–≤–æ–∫</h2>
    <form id="filter-form">
      <div class="row py-2 px-1" style="border: 2px solid #858181; background: #dddcdcbb; border-radius: 20px;">
        <div class="col-12 col-md-6 mb-3">
          <label for="date-input" class="form-label">–î–∞—Ç–∞</label>
          <input type="date" id="date-input" name="date" class="form-control" required>
        </div>
        
        <div class="col-12 col-md-6 mb-3">
          <label for="limit-select" class="form-label">–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ</label>
          <select id="limit-select" name="limit" class="form-select">
            <option value="30">30</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
        </div>
      </div>

      <div class="row mt-2 mb-1 g-2">
        <div class="col-12 col-md-6">
          <button type="submit" class="btn btn-primary w-100 fw-bold">
            üîç –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä
          </button>
        </div>
        <div class="col-12 col-md-3">
          <button type="button" id="reset-button" class="btn btn-secondary w-100 fw-bold">
            üîÑ –°–±—Ä–æ—Å–∏—Ç—å
          </button>
        </div>
        <div class="col-12 col-md-3">
          <button type="button" id="download-button" class="btn btn-success w-100 fw-bold">
            üì• –û—Ç—á–µ—Ç
          </button>
        </div>
      </div>
    </form>
  </div>

  <!-- Modal for delete reason -->
  <div class="modal fade" id="deleteReasonModal" tabindex="-1" aria-labelledby="deleteReasonLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteReasonLabel">–ü—Ä–∏—á–∏–Ω–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–∞</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="–ó–∞–∫—Ä—ã—Ç—å"></button>
        </div>
        <form id="delete-reason-form">
          <div class="modal-body">
            <label for="delete-reason-input" class="form-label">–í–≤–µ–¥–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É</label>
            <textarea id="delete-reason-input" class="form-control" rows="3" required></textarea>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
            <button type="submit" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Orders table -->
  <div class="table-shell">
    <div class="table-scroll">
      <table class="table table-bordered table-striped align-middle mb-0">
        <thead class="table-dark">
          <tr>
            <th class="text-center" style="width: 50px;">#</th>
            <th class="text-center" style="min-width: 200px;">–ê–¥—Ä–µ—Å</th>
            <th class="text-center" style="min-width: 150px;">–§–ò–û –∫–ª–∏–µ–Ω—Ç–∞</th>
            <th class="text-center" style="min-width: 130px;">–¢–µ–ª–µ—Ñ–æ–Ω</th>
            <th class="text-center" style="width: 120px;">–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody id="orders-tbody"></tbody>
      </table>
    </div>
  </div>

  <!-- Pagination -->
  <nav id="pagination-block" aria-label="Page navigation" class="mt-3">
    <ul class="pagination justify-content-center" id="pagination-ul"></ul>
  </nav>
</div>

<script>
  window.companyId = {{ company_id | default(None) | tojson | safe }};
</script>

<script src="/static/verification/orders_control/js/view.js"></script>

{% endblock %}