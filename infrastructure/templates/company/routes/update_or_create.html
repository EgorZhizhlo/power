{% extends 'base.html' %}

{% set is_create = (view_type == 'create') %}
{% block title %}
{{ last_name|capitalize }} {{ name|capitalize }} {{ patronymic|capitalize }}¬†|
{% if is_create %}–î–æ–±–∞–≤–ª–µ–Ω–∏–µ{% else %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ{% endif %}‚ÄØ–º–∞—Ä—à—Ä—É—Ç–∞
{% endblock %}

{% block content %}
<h1 class="fs-xl d-flex flex-column align-items-center mb-4">

  {# 1.¬†–õ–æ–≥–æ—Ç–∏–ø –∫–æ–º–ø–∞–Ω–∏–∏ #}
  {% if company_image %}
  <div class="photo mb-3">
    <img src="data:image/jpeg;base64,{{ company_image }}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏: {{ company_name }}">
  </div>
  {% endif %}
  <div class="btn-group mb-3">
    <a href="/companies/routes?company_id={{company_id}}" class="btn btn-outline-secondary label-text fw-bold"
      style="border-width: 3px;">üîô –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</a>
    <a href="/companies/company?company_id={{company_id}}" class="btn btn-outline-dark label-text fw-bold"
      style="border-width: 3px;">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
  </div>
  {% if is_create %}–î–æ–±–∞–≤–ª–µ–Ω–∏–µ{% else %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ{% endif %}¬†–º–∞—Ä—à—Ä—É—Ç–∞
</h1>

<div class="card p-4 mb-5">
  <form id="route-form" method="{% if is_create %}POST{% else %}PUT{% endif %}" action="
      {% if is_create %}
        /companies/api/routes/create?company_id={{company_id}}
      {% else %}
        /companies/api/routes/update?company_id={{company_id}}&route_id={{route.id}}
      {% endif %}">

    <div class="mb-3">
      <label for="name" class="form-label label-text"><b>–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞</b></label>
      <input type="text" id="name" name="name" class="form-control text-center input-text"
        value="{% if not is_create %}{{ route.name }}{% endif %}" required>
    </div>

    <div class="mb-3">
      <label for="day_limit" class="form-label label-text"><b>–õ–∏–º–∏—Ç –Ω–∞¬†–¥–µ–Ω—å</b></label>
      <input type="number" id="day_limit" name="day_limit" class="form-control text-center input-text" min="1"
        value="{% if not is_create %}{{ route.day_limit }}{% endif %}" required>
    </div>

    <div class="mb-3">
      <label for="color" class="form-label label-text"><b>–¶–≤–µ—Ç¬†(HEX –±–µ–∑¬†#)</b></label>
      <input type="text" id="color" name="color" class="form-control text-center input-text" pattern="[0-9A-Fa-f]{6}"
        placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä¬†FF0000" value="{% if not is_create %}{{ route.color }}{% endif %}" required>
    </div>

    <div class="d-flex justify-content-end">
      <button type="submit" class="btn btn-outline-success label-text fw-bold" style="border-width: 3px;">
        ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
      </button>
    </div>
  </form>
</div>

<script>
  window.companyId = {{ company_id }};
  window.isCreate = {{ is_create | tojson }};
  {% if not is_create %}
  window.routeId = {{ route.id }};
  {% endif %}
</script>
<script type="module" src="/static/company/routes/js/update_or_create.js"></script>
{% endblock %}